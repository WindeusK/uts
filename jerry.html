<!DOCTYPE html>
<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <title>Tambah anggota baru</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary" data-bs-theme="dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.php">Perpustakaan</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="index.php">Beranda</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="peminjam.php">Daftar Peminjaman</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="anggota.php">Daftar Anggota</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Tambah
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="tambah_peminjman.php">Peminjaman Baru</a></li>
                            <li><a class="dropdown-item" href="tambah_anggota.php">Anggota Baru</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

    </nav>
    <br>
    <center>
        <h4>
            MASUKKAN DATA ANGGOTA BARU PERPUSTAKAAN
        </h4>
    </center>
    <br><br>
    <?php 
    //menginclude file koneksi untuk mengkoneksikan ke database
    include "koneksi.php";

    //fungsi untuk mencegah inputan karakter yang tidak sesuai
    function input($data)
    {
        $data = trim($data);
        $data = stripslashes($data);
        $data = htmlspecialchars($data);
        return $data;
    }
    //cek apakah ada kiriman form dari method post
    if ($_SERVER["REQUEST_METHOD"] == "POST"); {
        $nama = input($_POST["nama"]);
        $nisn = input($_POST["nisn"]);
        $tanggal_lahir = input($_POST["tanggal_lahir"]);
        $kelas_dan_studi = input($_POST["kelas_dan_studi"]);
        $no_hp = input($_POST["no_hp"]);
        $alamat = input($_POST["alamat"]);

        //query input menginput data ke tabel anggota
        $sql = "insert into peserta (nama,nisn,tanggal_lahir,kelas_dan_studi,no_hp,alamat)
        valeus ($nama,$nisn,$tanggal_lahir,$kelas_dan_studi,$no_hp,$alamat)";

        //eksekusi/jalankan query diatas
        $hasil = mysqli_query($koneksi, $sql);

        //kondisi apakah berhasil atau tidak
        if ($hasil) {
            header("location:index.php");
        } else {
            echo "<div class='alert alert-danger'> DATA GAGAL DISIMPAN </div>";
        }
    }
    ?>
    <div class="container"> <!-- Content here -->
        <form class="row g-4" action="<?php echo $_SERVER["PHP_SELF"]; ?>" method="post">
            <!--form input data anggota -->
            <!--input nama-->
            <div class="col-md-2">
                <label for="namalengkap">Nama Lengkap</label>
                <input type="text" class="form-control" id="namalengkap" placeholder="masukkan nama lengkap">
            </div>
            <!--input NISN-->
            <div class="col-md-2">
                <label for="nisn">NISN</label>
                <input type="text" class="form-control" id="nisn" placeholder="masukkan nomor NISN">
            </div>
            <!--input Tanggal lahir-->
            <div class="col-md-2">
                <label for="tanggallahir">Tanggal lahir</label>
                <input type="date" class="form-control" id="tanggallahir" placeholder="masukkan tanggal lahir">
            </div>
            <!--input kelas-->
            <div class="col-md-2">
                <label for="kelas">kelas dan jurusan</label>
                <input type="text" class="form-control" id="kelas" placeholder="masukkan kelas dan jurusan">
            </div>
            <!--input no.hp-->
            <div class="col-md-6">
                <label for="nohp">no. hp</label>
                <input type="tel" class="form-control" id="nohp"
                    placeholder="masukkan nomor handphone (*atau whatsapp jika diperlukan)">
            </div>
            <!--input alamat-->
            <div class="col-md-8">
                <label for="">alamat</label>
                <textarea type="text" class="form-control" id="" placeholder=""></textarea>
            </div>
            <!---->
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
   Â </div>

</html>